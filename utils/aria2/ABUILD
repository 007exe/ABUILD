#ABUILD created by/создан: NomerUNO, uno.kms at gmail.com 

pkgname=aria2
pkgver=1.35.0
pkgbuild=1
arch=('auto')

shortdesc="aria2 is a lightweight multi-protocol & multi-source, cross platform download utility operated in command-line."

source=("https://github.com/tatsuhiro-t/aria2/releases/download/release-$pkgver/aria2-$pkgver.tar.xz")

tags="net-p2p console"
# cppunit
build_deps="make gcc gcc-g++ gnutls libxml2 sqlite c-ares ca-certificates gettext grep coreutils libssh2"

BUILD_SYSTEM="autotools"

BUILD_WORD="LDFLAGS=\"$SLKLDFLAGS\" CFLAGS=\"$SLKCFLAGS\" CXXFLAGS=\"$SLKCFLAGS\" ./configure"

BUILD_KEYS="--prefix=/usr \
--bindir=/usr/bin \
--sbindir=/usr/bin \
--libexecdir=/usr/libexec \
--includedir=/usr/include \
--mandir=/usr/share/man \
--infodir=/usr/share/info \
--libdir=/usr/lib${LIBDIRSUFFIX} \
--sysconfdir=/etc \
--localstatedir=/var \
--enable-bittorrent \
--enable-metalink \
--enable-epoll \
--enable-nls \
--enable-threads=posix \
--enable-threads \
--with-ca-bundle=/etc/ssl/certs/ca-certificates.crt"

INSTALL_KEYS="DESTDIR=${pkgdir}"

after_build() {
	go_src_dir

	 # add bash completion
	install -d "$pkgdir"/usr/share/bash-completion/completions
	install -m644 "$pkgdir"/usr/share/doc/aria2/bash_completion/aria2c \
	 "$pkgdir"/usr/share/bash-completion/completions
	rm -rf "$pkgdir"/usr/share/doc/aria2/bash_completion

}
