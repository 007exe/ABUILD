# ABUILD generated by spkg2abuild converter from nss_ldap-265-1.spkg

# Package metadata
pkgname=nss_ldap
pkgver=265
pkgbuild=2
arch="auto"

# Package description
shortdesc=("NSS LDAP Module")
longdesc=("The resolution of the entities defined in RFC 2307 is generally performed by a set of UNIX C library calls (such as getpwnam() to return the attributes of a user). The nss_ldap module provides the means for Solaris and Linux workstations to this information (such as users, hosts, and groups) from LDAP directories. The module is the reference implementation of RFC 2307, and has been studied by vendors such as Sun (who developed the original Name Service Switch interface).")

# Source URL
source=("http://www.padl.com/download/nss_ldap-${pkgver}.tar.gz")

# Tags
tags="sys-auth network"
config_files="etc/nss_ldap.conf"

build() {
	go_src_dir
	burn_patches
	set -e
	./configure --with-ldap-conf-file=/etc/nss_ldap.conf \
		--with-ldap=openldap \
		--libdir=/lib${LIBDIRSUFFIX} \
		--mandir=/usr/share/man \
		--enable-schema-mapping \
		--enable-rfc2307bis \
		--enable-configurable-krb5-ccname-gssapi

	env PATH=`pwd`:${PATH} make -j${numjobs}
	make install DESTDIR=${pkgdir}
	set +e
}

