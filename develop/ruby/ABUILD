# ABUILD generated by mkpkg_generator.sh

pkgname=ruby
pkgver=2.7.2
pkgbuild=1
arch=("auto")

shortdesc=("ruby (Interpreted object-oriented scripting language)")
longdesc=("Ruby is an interpreted scripting language for quick and easy object-oriented programming. It has many features to process text files and to do system management tasks (as in Perl). It is simple, straight-forward, and extensible. Visit the Ruby project online at http://www.ruby-lang.org/")

tags=("develop dev-ruby")

source=("https://cache.ruby-lang.org/pub/ruby/${pkgver:0:3}/ruby-${pkgver}.tar.xz")

pkglist="rubydocs"

build_deps=" "

BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr \
	--libdir=/usr/lib${LIBDIRSUFFIX} \
	--mandir=/usr/share/man \
	--docdir=/usr/doc/share/ruby-${pkgver} \
	--sysconfdir=/etc \
	--enable-shared \
	--enable-pthread \
	--disable-rpath"

INSTALL_KEYS="DESTDIR=$pkgdir"

rubydocs() {
	pkgname=ruby-docs
	shortdesc="Ruby documentation"
	longdesc="Ruby documentation"
	arch="noarch"
}

rubydocs_prep() {
	set -e
	mkdir -p ${pkgdir}/usr
	mv ${p_pkgdir}/usr/doc ${pkgdir}/usr/

	if [ -d ${p_pkgdir}/usr/share/doc ] ; then
		mkdir -p ${pkgdir}/usr/share
		mv ${p_pkgdir}/usr/share/doc ${pkgdir}/usr/share/
	fi
	
	set +e
}
