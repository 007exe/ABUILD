# ABUILD generated by mkpkg_generator.sh

pkgname=mpfr
pkgver=4.1.0
pkgbuild=2
arch=("auto")

shortdesc=("mpfr (Multiple-Precision Floating-Point Reliable Library)")
longdesc=("The MPFR library is a C library for multiple-precision floating-point computations with exact rounding (also called correct rounding). It is based on the GMP multiple-precision library. The main goal of MPFR is to provide a library for multiple-precision floating-point computation which is both efficient and has well-defined semantics. It copies the good ideas from the ANSI/IEEE-754 standard for double-precision floating-point arithmetic (53-bit mantissa).")

tags=("dev-libs libs")

build_deps="gmp"

source=("https://ftp.gnu.org/gnu/mpfr/mpfr-${pkgver}.tar.xz")

BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr --libdir=/usr/lib${LIBDIRSUFFIX} --docdir=/usr/share/doc/${pkgname}-${pkgver} --enable-thread-safe --enable-shared"
INSTALL_KEYS="DESTDIR=$pkgdir"

after_build() {
    go_src_dir
    make check || exit 1
# Не могу понять почему gcc линкуется с /usr/lib64/libmpfr.so.4 в место нового /usr/lib64/libmpfr.so
   ln -n $pkgdir/usr/lib64/libmpfr.so $pkgdir/usr/lib64/libmpfr.so.4
}
