# ABUILD generated by mkpkg_generator.sh

pkgname=guile2
pkgver=2.0.14
pkgbuild=1
arch=("auto")

shortdesc=("guile (GNU's extension language library)")
longdesc=("This is Guile, Project GNU's extension language library. Guile is an interpreter for Scheme, packaged as a library that you can link into your applications to give them their own scripting language. Guile will eventually support other languages as well, giving users of Guile-based applications a choice of languages.")

tags=("dev-scheme develop")

build_deps="gmp ncurses texinfo libunistring libffi gc"

source=("https://ftp.gnu.org/pub/gnu/guile/guile-$pkgver.tar.gz")

LDFLAGS="$SLKLDFLAGS -lpthread"
BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr --libdir=/usr/lib${LIBDIRSUFFIX} --disable-static --disable-error-on-warning --program-suffix=2.0"

after_build() {
go_src_dir
rm "$pkgdir"/usr/lib${LIBDIRSUFFIX}/libguile-2.?.so.*-gdb.scm

sed -i '1s/guile/guile2.0/' -i "$pkgdir/usr/bin/guile-config2.0"
mv "$pkgdir"/usr/share/aclocal/guile.m4 "$pkgdir"/usr/share/aclocal/guile20.m4
}
