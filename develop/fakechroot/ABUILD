pkgname=fakechroot
pkgver=2.20.1
pkgbuild=2
arch=('auto')

shortdesc=("A chroot-like wrapper for non-privileged users")
longdesc=("Fakechroot runs a command in an environment were is additional possibility to use chroot(8) command without root privileges. This is useful for allowing users to create own chrooted environment with possibility to install another packages without need for root privileges.")

source=("https://github.com/dex4er/fakechroot/archive/${pkgver}.tar.gz")

tags="develop dev-util"

build_deps="glibc perl"

build() {
  go_src_dir
  burn_patches
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX}/libfakeroot \
    --sysconfdir=/etc
  make -j${numjobs}

  make DESTDIR=${pkgdir} install

  install -dm755 ${pkgdir}/etc/ld.so.conf.d/
  echo "/usr/lib${LIBDIRSUFFIX}/libfakeroot/fakechroot/" > ${pkgdir}/etc/ld.so.conf.d/fakechroot.conf
}
