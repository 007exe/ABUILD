pkgname=python-commonmark
pkgver=0.9.1
pkgbuild=1
arch=('auto')

shortdesc=("Python parser for the CommonMark Markdown spec")
longdesc=("CommonMark-py is a pure Python port of jgms commonmark.js, a Markdown parser and renderer for the CommonMark specification, using only native modules.")

source=("https://github.com/readthedocs/commonmark.py/archive/${pkgver}.tar.gz")

tags="develop dev-python"
# python-sphinx_rtd_theme
build_deps="python python-setuptools python-sphinx python-hypothesis"

adddep="python python-hypothesis"

build()
{
  go_src_dir
  python setup.py build
#  make -C docs man text SPHINXBUILD=sphinx-build
  python setup.py install --root="${pkgdir}" -O1 --skip-build
  install -Dm 644 README.rst CHANGELOG.md -t "${pkgdir}/usr/share/doc/${pkgname}"
  install -Dm 644 LICENSE -t "${pkgdir}/usr/share/licenses/${pkgname}"
#  install -Dm 644 docs/_build/text/* -t "${pkgdir}/usr/share/doc/${pkgname}"
#  install -Dm 644 docs/_build/man/commonmark-py.1 "${pkgdir}/usr/share/man/man1/${pkgname}.1"
  mv "${pkgdir}/usr/bin/cmark"{,-py3}
}
