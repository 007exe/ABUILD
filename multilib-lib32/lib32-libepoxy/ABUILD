pkgname=lib32-libepoxy
pkgver=1.5.10
pkgbuild=1
arch=("auto")

shortdesc=("Library handling OpenGL function pointer management  (32-bit).")

source=("https://github.com/anholt/libepoxy/archive/refs/tags/${pkgver}.tar.gz")

tags=("media-libs lib32")

adddep=("lib32-glibc")

# lib32-systemd 
build_deps=("${adddep} meson lib32-libglvnd")

build(){
  go_src_dir
  export CC='gcc -m32'
  export PKG_CONFIG=i686-pc-linux-gnu-pkg-config
  meson build \
  -D buildtype=release \
  -D prefix=/usr \
  --libdir=/usr/lib32 \
  -D docs=false
  meson compile -C build
  meson install -C build --destdir ${pkgdir}
  rm -r ${pkgdir}/usr/include
  install -Dt ${pkgdir}/usr/share/licenses/${pkgname} -m644 libepoxy/COPYING
}
