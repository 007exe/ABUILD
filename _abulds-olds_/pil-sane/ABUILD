# ABUILD generated by mkpkg_generator.sh
pkgname=pil
pkgver=1.1.7
pkgbuild=2
arch=("auto")

shortdesc=("Python Imaging Library")
longdesc=("Python imaging library")

tags=("libs dev-python")
source=("http://effbot.org/downloads/Imaging-$pkgver.tar.gz")
build_deps="python libjpeg freetype lcms sane"

pkglist="sane"

sane() {
	pkgname=pil-sane
	shortdesc=("Python imaging library: Sane support")
	longdesc=("Python imaging library: Sane support")
	tags=("libs dev-python")
	adddep="pil"
}

sane_prep() {
	go_src_dir
	cd Sane
	python setup.py build_ext
	python setup.py install --root=$pkgdir
}

build() {
	go_src_dir
	burn_patches
	set -e
	python setup.py build_ext
	python setup.py install --root=$pkgdir
 
	install -dm755 $pkgdir/usr/include/python2.7/
	install -m644 -t $pkgdir/usr/include/python2.7/ libImaging/*.h 

	for f in pildriver pilprint pilconvert pilfile pilfont; do
		mv $pkgdir/usr/bin/$f{.py,}
	done
	set +e
}

