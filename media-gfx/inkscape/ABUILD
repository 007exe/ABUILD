pkgname=inkscape
pkgver=1.3
pkgbuild=1
arch=("auto")

shortdesc=("Professional vector graphics editor.")

source=("https://media.inkscape.org/dl/resources/file/inkscape-${pkgver}.tar.xz")

tags=("apps media-gfx")

# python-coverage scour
adddep=("boost-libs double-conversion gc graphicsmagick gsl gspell gtkmm3 gtksourceview4 lcms2 lib2geom libcdr libjpeg-turbo libsoup
libvisio libxslt poppler-glib potrace python python-appdirs python-beautifulsoup4 python-cachecontrol python-cairo python-certifi
python-chardet python-cssselect python-filelock python-gobject python-idna python-lockfile python-lxml python-msgpack
python-numpy python-packaging python-pillow python-pyserial python-requests python-six python-urllib3 python-zstandard")

build_deps=("${adddep} cmake boost")

# NOTE: Это опциональные зависимости
removedep=("fig2dev gvfs pstoedit texlive-pstricks")

build() {
  go_src_dir
  burn_patches
  mkdir -p build
  export PKG_CONFIG_PATH='/usr/lib/imagemagick6/pkgconfig'
  cmake -Bbuild \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=lib \
    -DWITH_DBUS=ON
  cmake --build build -j${numjobs}
  DESTDIR=${pkgdir} cmake --build build --target install
}
