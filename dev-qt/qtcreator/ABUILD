pkgname=qtcreator
pkgver=9.0.0
pkgbuild=1
arch=("auto")

shortdesc=("Lightweight, cross-platform integrated development environment.")
longdesc=("Lightweight IDE for C++/QML development centering around Qt.")

source=("https://github.com/qt-creator/qt-creator/archive/refs/tags/v${pkgver}.tar.gz")

tags=("dev-qt develop")

# clazy
build_deps=("cmake llvm python qt6-tools qt6-svg qt6-quick3d qt6-serialport
qt6-shadertools qt6-5compat clang yaml-cpp qt6-webengine")

build() {
  go_src_dir
  burn_patches
  cmake -B build \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=lib \
    -DWITH_DOCS=ON \
    -DBUILD_DEVELOPER_DOCS=ON \
    -DBUILD_QBS=OFF \
    -DQTC_CLANG_BUILDMODE_MATCH=ON
  cmake --build build -j${numjobs}
  cmake --build build --target docs
  DESTDIR=${pkgdir} cmake --install build
# Установка документации
  cp -r build/share/doc ${pkgdir}/usr/share

  install -Dm644 LICENSE.GPL3-EXCEPT ${pkgdir}/usr/share/licenses/qtcreator/LICENSE.GPL3-EXCEPT
}
