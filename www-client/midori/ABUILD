pkgname=midori
pkgver=9.0
pkgbuild=1
arch=('auto')

shortdesc=("Lightweight web browser")
longdesc=("Midori is a lightweight GTK+ 3 web browser based on WebKitGtk. It features tabs, windows and session management, bookmarks stored with XBEL, searchbox based on OpenSearch, and user scripts support.")

source=("https://github.com/midori-browser/core/releases/download/v${pkgver}/midori-v${pkgver}.tar.gz")

tags="www-client xapps"

build_deps="cmake git gobject-introspection intltool ninja vala libsoup webkit2gtk gcr libpeas"

build() {
  go_src_dir
  burn_patches
  mkdir -p build
  cd build
  cmake .. \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=lib${LIBDIRSUFFIX} \
    -DCMAKE_C_FLAGS="$CFLAGS -fPIC -w" \
    -DVALA_CFLAGS="$CFLAGS -fPIC -w" \
    -G Ninja
  ninja
  DESTDIR="$pkgdir" ninja install
}
