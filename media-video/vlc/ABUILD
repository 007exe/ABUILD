pkgname=vlc
pkgver=3.0.16
buildver=1
arch=("auto")

shortdesc=("Multi-platform MPEG, VCD/DVD, and DivX player")
longdesc=("VLC is a media player, streamer, and encoder. It can play from many inputs, such as files, network streams, capture devices, desktops, or DVD, SVCD, VCD, and audio CD. It can use most audio and video codecs (MPEG 1/2/4, H264, VC-1, DivX, WMV, Vorbis, AC3, AAC, etc.), and it can also convert to different formats and/or send streams through the network.")

source=("https://download.videolan.org/vlc/${pkgver}/vlc-${pkgver}.tar.xz")

tags=("xapps media-video")
# live-media libdc1394 libcaca libgme xosd twolame aalib libmicrodns smbclient vcdimager protobuf libshout zvbi libkate libtiger sdl_image libgoom2 projectm chromaprint aribb24 aribb25 pcsclite a52dec libdvbpsi libdca libmatroska libmpeg2 libta libupnp
build_deps=("gst-plugins-base-libs libnotify libbluray flac libavc1394 gtk3 librsvg avahi libmtp libdvdcss libssh2 mesa libnfs mpg123 libdvdread libdvdnav libogg libmodplug libvpx libvorbis speex opus libtheora libpng libjpeg-turbo libass libpulse alsa-lib jack libsamplerate libsoxr lirc aom srt dav1d libxpm libproxy lua52 libidn taglib libmpcdec ffmpeg faad2 libmad xcb-util-keysyms libxinerama libsecret libarchive qt5-base qt5-x11extras qt5-svg freetype fribidi harfbuzz fontconfig libxml2 gnutls libplacebo wayland-protocols")

build() {
  go_src_dir
  burn_patches
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX}
    --sysconfdir=/etc \
    --with-kde-solid=/usr/share/solid/actions/ \
    --disable-rpath \
    --enable-nls \
    --enable-archive \
    --enable-live555 \
    --enable-dc1394 \
    --enable-dv1394 \
    --enable-dvdread \
    --enable-dvdnav \
    --enable-bluray \
    --disable-opencv \
    --enable-smbclient \
    --enable-sftp \
    --enable-nfs \
    --enable-realrtsp \
    --enable-dvbpsi \
    --enable-gme \
    --enable-ogg \
    --enable-shout \
    --enable-matroska \
    --enable-mod \
    --enable-mpc \
    --enable-mad \
    --enable-mpg123 \
    --enable-gst-decode \
    --enable-avcodec \
    --enable-libva \
    --enable-avformat \
    --enable-postproc \
    --enable-faad \
    --enable-vpx \
    --enable-twolame \
    --disable-fdkaac \
    --enable-a52 \
    --enable-dca \
    --enable-flac \
    --enable-libmpeg2 \
    --enable-vorbis \
    --enable-speex \
    --enable-opus \
    --enable-oggspots \
    --disable-schroedinger \
    --enable-png \
    --enable-jpeg \
    --enable-x264 \
    --enable-x265 \
    --enable-zvbi \
    --enable-libass \
    --enable-kate \
    --enable-tiger \
    --enable-vdpau \
    --enable-wayland \
    --enable-sdl-image \
    --enable-freetype \
    --enable-fribidi \
    --enable-harfbuzz \
    --enable-fontconfig \
    --enable-svg \
    --enable-svgdec \
    --enable-aa \
    --enable-caca \
    --enable-pulse \
    --enable-alsa \
    --enable-jack \
    --enable-samplerate \
    --enable-soxr \
    --enable-chromaprint \
    --enable-chromecast \
    --enable-qt \
    --enable-skins2 \
    --enable-libtar \
    --enable-ncurses \
    --enable-lirc \
    --enable-goom \
    --enable-projectm \
    --enable-avahi \
    --enable-mtp \
    --enable-upnp \
    --enable-microdns \
    --enable-libxml2 \
    --disable-libgcrypt \
    --enable-gnutls \
    --enable-taglib \
    --enable-secret \
    --enable-kwallet \
    --disable-update-check \
    --enable-notify \
    --enable-libplacebo \
    --enable-vlc \
    --enable-aribsub \
    --enable-aribcam \
    --enable-aom \
    --enable-srt \
    --enable-dav1d
  make -j${numjobs}
  make DESTDIR=${pkgdir} install
}
