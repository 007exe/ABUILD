pkgname=docbook-xsl
pkgver=1.79.2
pkgbuild=4
arch=("noarch")

shortdesc=("XML stylesheets for Docbook-xml transformations.")
longdesc=("These XSL stylesheets allow to convert any DocBook document to another printed (for example, RTF or PostScript) or online (for example, HTML) format. They are highly customizable.")

source=("https://github.com/docbook/xslt10-stylesheets/releases/download/release%2F${pkgver}/docbook-xsl-${pkgver}.tar.gz")

tags=("app-text develop")

build_deps=("libxml2 libxslt docbook-xml")

adddep=("libxml2 libxslt docbook-xml")

build() {
  go_src_dir
  burn_patches
  mkdir -p ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv VERSION ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv VERSION.xsl ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv assembly ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv common ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv eclipse ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv epub ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv epub3 ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv fo ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv highlighting ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv html ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv htmlhelp ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv javahelp ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv lib ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv manpages ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv params ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv profiling ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv roundtrip ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv template ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv website ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv xhtml ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv xhtml-1_1 ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}
  cp -rv xhtml5 ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}

# FIXME: Надо это автомотизировать
  rm ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}/assembly/README
  rm -r ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}/assembly/schema
  rm ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}/epub/README
  rm -r ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}/epub/bin
  rm ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}/epub3/README
  rm ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}/highlighting/README
  rm ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}/manpages/ChangeLog.20020917
  rm ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}/roundtrip/template.dot
  rm ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}/xhtml5/README

  cp -r ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver} ${pkgdir}/usr/share/xml/docbook/xsl-stylesheets-${pkgver}-nons

  install -d ${pkgdir}/etc/xml
  install -Dt ${pkgdir}/usr/share/licenses/${pkgname} -m644 COPYING
}
