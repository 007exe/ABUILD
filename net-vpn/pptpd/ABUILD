# ABUILD generated by mkpkg_generator.sh

pkgname=pptpd
pkgver=1.3.4
pkgbuild=9
arch=("auto")

shortdesc=("PPTP Linux Server")
longdesc=("PPTP Linux Server")
tags=("server net-dialup")
config_files="etc/pptpd.conf
etc/conf.d/pptpd"

adddep="ppp>=2.4.5"
source=("http://downloads.sourceforge.net/sourceforge/poptop/pptpd-$pkgver.tar.gz")
build() {
	go_src_dir
	burn_patches
	set -e
	autoreconf -i
	./configure --prefix=/usr --libdir=/usr/lib${LIBDIRSUFFIX} --exec-prefix=/usr --mandir=/usr/man

	make -j${numjobs}

	sed -i 's|install -o root|install|g' plugins/Makefile
	sed -i 's|?=|=|g' plugins/Makefile
	make DESTDIR=$pkgdir install

	if [ "$LIBDIRSUFFIX" != "" ] ; then
		mv ${pkgdir}/usr/lib ${pkgdir}/usr/lib${LIBDIRSUFFIX}
	fi

	mkdir -p $pkgdir/etc/
	echo "# Read man pptpd.conf and write your pptpd configuration here" >$pkgdir/etc/pptpd.conf
	install -D -m0755 ${filedir}/pptpd-init $pkgdir/etc/init.d/pptpd
	install -D -m0644 ${filedir}/pptpd-confd $pkgdir/etc/conf.d/pptpd
	set +e
}
