pkgname=gutenprint
pkgver=5.3.4
pkgbuild=1
arch=("auto")

shortdesc=("Top quality printer drivers for POSIX systems.")

tags=("console net-print")

source=("https://downloads.sourceforge.net/gimp-print/${pkgname}-${pkgver}.tar.xz")

# docbook-utils texi2html texlive-bin
build_deps=("gimp gtk2 cups ghostscript dialog doxygen")

build() {
  go_src_dir
  burn_patches
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib \
    --sbindir=/usr/bin \
    --disable-rpath \
    --enable-samples \
    --disable-static \
    --disable-static-genppd \
    --enable-cups-ppds \
    --enable-simplified-cups-ppds=only \
    --enable-translated-cups-ppds \
    --enable-globalized-cups-ppds
  sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
  make -j${numjobs}
  make DESTDIR=${pkgdir} install
}
