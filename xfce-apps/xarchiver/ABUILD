pkgname=xarchiver
pkgver=0.5.4.21
pkgbuild=1
arch=("auto")

shortdesc=("GTK+ frontend to various command line archivers.")

source=("https://github.com/ib/xarchiver/archive/${pkgver}/xarchiver-${pkgver}.tar.gz")

tags=("xfce xfce-apps")

adddep=("gtk3")

build_deps=("${adddep} docbook-xsl intltool xmlto")

# NOTE: Это опциональные зависимости
removedep=("arj binutils bzip2 cpio gzip lha lrzip lz4 lzip lzop p7zip tar unarj unrar unzip xdg-utils xz zip zstd")

build() {
  go_src_dir
  burn_patches
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib \
    --disable-gtk2
  make -j${numjobs}
  make DESTDIR=${pkgdir} install

  install -Dm644 ${filedir}/xarchiver.appdata.xml ${pkgdir}/usr/share/metainfo/${pkgname}.appdata.xml
}
