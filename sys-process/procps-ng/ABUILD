pkgname=procps-ng
pkgver=4.0.4
pkgbuild=2
arch=("auto")

shortdesc=("Utilities for monitoring your system and its processes.")

source=("https://downloads.sourceforge.net/project/procps-ng/Production/procps-ng-${pkgver}.tar.xz")

tags=("base sys-process")

# systemd --with-systemd
adddep=("glibc ncurses")

build_deps=("ncurses glibc")

build() {
  go_src_dir
#NOTE: Фикс сборки
  sed 's:<ncursesw/:<:g' -i src/watch.c
  burn_patches
  autoreconf -fi
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib \
    --exec-prefix=/ \
    --sysconfdir=/etc \
    --libdir=/usr/lib \
    --bindir=/usr/bin \
    --sbindir=/usr/bin \
    --enable-watch8bit \
    --disable-modern-top \
    --disable-kill
  make -j${numjobs}
  make DESTDIR=${pkgdir} install
# NOTE: kill находится в util-linux и доки следует использовать от туда
  rm ${pkgdir}/usr/share/man/de/man1/kill.1
  rm ${pkgdir}/usr/share/man/fr/man1/kill.1
  rm ${pkgdir}/usr/share/man/uk/man1/kill.1
}
