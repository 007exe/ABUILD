# ABUILD generated by mkpkg_generator.sh

pkgname=groff
pkgver=1.22.4
pkgbuild=2
arch=("auto")

shortdesc=("groff (document formatting system)")
longdesc=("The GNU groff package provides versions of troff, nroff, eqn, tbl, and other Unix text-formatting utilities. Groff is used to 'compile' man pages stored in groff/nroff format into a form which can be printed or displayed on the screen. These man pages are stored in compressed form in the /usr/man/man0 /usr/man/man1 /usr/man/man2 /usr/man/man3 /usr/man/man4 /usr/man/man5 /usr/man/man6 /usr/man/man7 /usr/man/man8 /usr/man/manm /usr/man/mann directories.")

tags=("console app-text")

source=("ftp://ftp.gnu.org/gnu/groff/groff-$pkgver.tar.gz")
build_deps="perl"
build() {
	go_src_dir
	burn_patches
	CFLAGS="$SLKCFLAGS" CXXFLAGS="$SLKCXXFLAGS" ./configure --prefix=/usr \
	     --libdir=/usr/lib${LIBDIRSUFFIX} \
	     --without-x \
	     --docdir=/usr/share/doc/${pkgname}-${pkgver}
	make -j${numjobs} 
	make DESTDIR=${pkgdir} install
	cd $pkgdir/usr/bin
		# needed for xman
		ln -s eqn geqn
		ln -s tbl gtbl
		ln -s soelim zsoelim
		rm -rf $pkgdir/usr/lib${LIBDIRSUFFIX}/groff/site-tmac
		# Fix some issues when encoding to utf8 man pages
		#  The output chars don't match keyboard chars...
		cat $filedir/site.tmac >> $pkgdir/usr/share/groff/site-tmac/man.local
		cat $filedir/site.tmac >> $pkgdir/usr/share/groff/site-tmac/mdoc.local

}


