# ABUILD generated by chip
pkgname=man-pages
pkgver=5.11
_posixver=2017-a
pkgbuild=1
arch=("noarch")

shortdesc=("man-pages (system documentation)")
longdesc=("Man pages are online documentation for Linux. This package includes many section 1, 2, 3, 4, 5, 7, and 8 man pages for Linux. The man-pages distribution is maintained by Michael Kerrisk with the help of more writers, editors, and other contributors than we can name here. For more information, see http://www.kernel.org/doc/man-pages/")

tags=("console sys-apps")

source=("https://www.kernel.org/pub/linux/docs/man-pages/$pkgname-$pkgver.tar.xz"
	"https://www.kernel.org/pub/linux/docs/man-pages/man-pages-posix//$pkgname-posix-${_posixver}.tar.xz")

build_deps="sed mkpkg"
adddep="man"
custom_opts="skip_gendeps"

build() {
  go_src_dir

  make prefix=${pkgdir}/usr install

# posix pages have a custom license
  install -m755 -d "${pkgdir}/usr/share/licenses/${pkgname}"
  install -m644 "${srcdir}"/$pkgname-posix-${_posixver%-*}/POSIX-COPYRIGHT "${pkgdir}/usr/share/licenses/${pkgname}/POSIX-COPYRIGHT"

  cd "${pkgdir}"/usr/share/man
# included in shadow
  rm man5/passwd.5
  rm man3/getspnam.3
# included in tzdata
  rm man5/tzfile.5 man8/{tzselect,zdump,zic}.8
# included in bpf
  rm man7/bpf-helpers.7
# included in libxcrypt
  rm man3/crypt*.3
}
