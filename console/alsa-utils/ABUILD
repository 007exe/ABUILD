pkgname=alsa-utils
pkgver=1.2.5.1
pkgbuild=1
arch=("auto")

shortdesc=("Advanced Linux Sound Architecture - Utilities")
longdesc=("The ALSA Utilities package contains various utilities which are useful for controlling your sound card.")

tags=('console media-sound')

source=("ftp://ftp.alsa-project.org/pub/utils/${pkgname}-${pkgver}.tar.bz2")

build_deps="alsa-lib docbook-xsl ncurses python-docutils xmlto fftw libsamplerate"

build() {
  go_src_dir
  burn_patches
  autoreconf -fiv
  ./configure \
    --prefix=/usr \
    --sbindir=/usr/bin \
    --libdir=/usr/lib${LIBDIRSUFFIX} \
    --with-udev-rules-dir=/lib/udev/rules.d \
    --disable-alsaconf
  make -j${numjobs}
  make DESTDIR=${pkgdir} install

# Add OpenRC scripts
  install -D -m644 ${filedir}/alsa.confd ${pkgdir}/etc/conf.d/alsa
  install -D -m755 ${filedir}/alsa.initd ${pkgdir}/etc/init.d/alsa

# Create alsascr directory (OpenRC scripts wants this, dunno why)
  mkdir -p ${pkgdir}/etc/alsa.d

  install -vDm 644 README.md -t "${pkgdir}/usr/share/doc/${pkgname}"

# dir where to save ALSA state
  install -d "${pkgdir}/var/lib/alsa"
}

