pkgname=mc
pkgver=4.8.26
srcver=${pkgver//_/-}
pkgbuild=1
arch=('auto')

shortdesc=("A file manager that emulates Norton Commander")
longdesc=("Midnight Commander is a visual shell much like a file manager, only with way more features.  It is text mode, but also includes mouse support if you are running GPM.  Its coolest feature is the ability to ftp, view tar, zip files, and poke into RPMs for specific files.")

tags=('console app-misc')

source=("http://www.midnight-commander.org/downloads/mc-${pkgver}.tar.bz2")

build_deps="glibc e2fsprogs glib2 gpm libssh2 slang which unzip"


config_files="etc/mc/edit.indent.rc
etc/mc/filehighlight.ini
etc/mc/mc.ext
etc/mc/mc.keymap
etc/mc/sfs.ini
etc/mc/mc.menu
etc/mc/mcedit.menu"

build() {
  go_src_dir
  ./configure \
    --prefix=/usr \
    --sysconfdir=/etc \
    --enable-vfs-smb \
    --libdir=/usr/lib$LIBDIRSUFFIX \
    --with-screen=slang \
    --with-x
  make -j${numjobs} || make
  make DESTDIR=$pkgdir install

  rm "${pkgdir}"/etc/mc/mc.keymap && cp "${pkgdir}"/etc/mc/mc{.default,}.keymap
}
