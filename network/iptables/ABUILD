pkgname=iptables
pkgver=1.8.7
pkgbuild=1
arch=("auto")

shortdesc=("Tools for managing Linux kernel packet filtering capabilities")
longdesc=("The iptables utility controls the network packet filtering code in the Linux kernel. If you need to set up firewalls and/or IP masquerading, you should install this package.")

tags=("network net-firewall")

source=("http://www.netfilter.org/projects/iptables/files/${pkgname}-${pkgver}.tar.bz2")

build_deps="glibc libpcap kernel-headers"

build() {
  go_src_dir
  burn_patches
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib$LIBDIRSUFFIX \
    --sysconfdir=/etc \
    --enable-devel \
    --enable-bpf-compiler \
    --enable-libipq \
    --disable-nftables \
    --enable-shared
  make -j${numjobs}
  make DESTDIR=${pkgdir} install

install -Dm0755 ${filedir}/iptables.init ${pkgdir}/etc/init.d/iptables
}
