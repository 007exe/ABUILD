# ABUILD generated by mkpkg_generator.sh

pkgname=net-tools
pkgver=1.60
pkgbuild=1
arch=("auto")

shortdesc=("net-tools (base Linux networking utilities)")
longdesc=("This is the core collection of tools such as "ifconfig" and "route" used to configure networking on Linux. You won't be able to do much networking without this package and the network-scripts. The net-tools package was maintained for many years by Phil Blundell and Bernd Eckenfels.")

tags=("network net-misc")

# 1.60 released years ago, so even Slackware uses git snapshot. We will use latest trunk, of cource :)
#source=("git:git://net-tools.git.sourceforge.net/gitroot/net-tools/net-tools")
source=("git:https://github.com/ecki/net-tools.git")

build_deps="glibc git"

before_build() {
	go_src_dir
	burn_patches
	sed -i "s#/sbin#/bin#" Makefile
	sed -i "s#/usr##" man/Makefile
}


build() {
	go_src_dir
	burn_patches
	yes "" | make
	make DESTDIR=${pkgdir}/usr update

	# the following is provided by yp-tools
	rm "${pkgdir}"/usr/bin/{nis,yp}domainname
	rm "${pkgdir}"/usr/share/man/man1/{nis,yp}domainname.1

	# hostname is provided by inetutils
	rm "${pkgdir}"/usr/bin/{hostname,dnsdomainname,domainname}
	rm -rf "${pkgdir}"/usr/share/man/man1
}
