pkgname=gegl
pkgver=0.4.34
pkgbuild=1
arch=('auto')

shortdesc=("Graph based image processing framework.")
longdesc=("This package provides the GEneric Graphics Library, which is a graph based image processing format.")

source=("https://download.gimp.org/pub/gegl/${pkgver%.*}/gegl-${pkgver}.tar.xz")

tags="libs media-libs"
# poppler-glib libspiro
build_deps="intltool ruby mesa glu ffmpeg exiv2 vala gobject-introspection meson python-gobject babl json-glib gexiv2 libraw openexr librsvg libtiff luajit jasper lensfun suitesparse poppler"

build() {
  go_src_dir
  burn_patches
  mkdir -p build
  cd build
  meson .. \
    -Dprefix=/usr \
    -Dlibdir=/usr/lib${LIBDIRSUFFIX} \
    -Dworkshop=true \
    -Dmrg=disabled \
    -Dmaxflow=disabled
  ninja
  DESTDIR="${pkgdir}" ninja install
}
