pkgname=gegl
pkgver=0.4.46
pkgbuild=1
arch=("auto")

shortdesc=("Graph based image processing framework.")

source=("https://download.gimp.org/pub/gegl/${pkgver%.*}/gegl-${pkgver}.tar.xz")

tags=("libs media-libs")

adddep=("babl jasper json-glib lensfun libraw librsvg libspiro libtiff luajit openexr poppler-glib suitesparse gexiv2")

build_deps=("${adddep} exiv2 ffmpeg glu gobject-introspection intltool mesa meson python-gobject ruby vala")

# FIXME: Проблемы со сборкой документации

build() {
  go_src_dir
  burn_patches
  meson build \
    -D buildtype=release \
    -D prefix=/usr \
    -D libdir=/usr/lib \
    -D workshop=true \
    -D mrg=disabled \
    -D maxflow=disabled \
    -D docs=false
  ninja -C build -j${numjobs}
  DESTDIR=${pkgdir} ninja install -C build
}
