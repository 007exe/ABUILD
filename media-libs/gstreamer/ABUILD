pkgname=gstreamer
pkgver=1.18.5
pkgbuild=1
arch=('auto')

shortdesc=("Multimedia graph framework - core")
longdesc=("gstreamer is a streaming media framework that enables applications to share a common set of plugins for tasks such as video encoding and decoding, audio encoding and decoding, audio and video filters, audio visualisation, web streaming and anything else that streams in real-time or otherwise. This package only provides base functionality and libraries. You may need at least gst-plugins-base-1.18.4 and one of Good, Bad, Ugly or Libav plugins.")

tags=('libs media-libs')

source=("http://gstreamer.freedesktop.org/src/gstreamer/gstreamer-${pkgver}.tar.xz")

build_deps="gobject-introspection git valgrind bash-completion meson gmp gsl gtk3"

build() {
  go_src_dir
  burn_patches
  meson build \
    -D prefix=/usr \
    -D doc=disabled \
    -D ptp-helper-permissions=capabilities \
    -D dbghelp=disabled \
    -D gobject-cast-checks=disabled \
    -D package-name="GStreamer (AgiliaLinux)"
  meson compile -C build
  meson install -C build --destdir "$pkgdir"
}
