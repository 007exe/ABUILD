pkgname=openbox
pkgver=3.6.1
pkgbuild=1
arch=("auto")

shortdesc=("Highly configurable and lightweight X11 window manager")

source=("http://openbox.org/dist/openbox/$pkgname-$pkgver.tar.gz")

tags="xapps x11-wm"
# startup-notification imlib2 librsvg
build_deps="python libxcursor pango libsm libxml2 libxinerama libxrandr"

build() {
  go_src_dir
  burn_patches
# py3.patch modifies configure.ac
  autoreconf -ifv
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX} \
    --with-x \
    --enable-startup-notification \
    --sysconfdir=/etc
  make -j${numjobs}
  make DESTDIR=${pkgdir} install

# GNOME Panel is no longer available in the official repositories
  rm -r "$pkgdir"/usr/bin/{gdm-control,gnome-panel-control,openbox-gnome-session} \
    "$pkgdir"/usr/share/gnome{,-session} \
    "$pkgdir"/usr/share/man/man1/openbox-gnome-session.1 \
    "$pkgdir"/usr/share/xsessions/openbox-gnome.desktop
}

