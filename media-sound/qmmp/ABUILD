pkgname=qmmp
pkgver=1.5.3
pkgbuild=1
arch=('auto')

shortdesc=("Qt-based Multimedia Player")
longdesc=("Qt5-based audio player with winamp/xmms skins support")

source=("http://qmmp.ylsoftware.com/files/qmmp/1.5/qmmp-${pkgver}.tar.bz2")

tags=("xapps media-sound")
# pipewire libmms projectm libgme libsidplayfp wildmidi
build_deps=("cmake flac jack libmpcdec pulseaudio ffmpeg libcdio-paranoia libcddb libsamplerate libmodplug libsndfile wavpack mpg123 mesa faad2 opusfile qt5-tools qt5-base alsa-lib curl desktop-file-utils hicolor-icon-theme libmad libvorbis libogg libxkbcommon-x11 taglib xdg-utils")

adddep=("hicolor-icon-theme")

build() {
  go_src_dir
  burn_patches
  cmake . \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=lib${LIBDIRSUFFIX} \
    -DUSE_HAL:BOOL=FALSE
  make -j${numjobs}
  make DESTDIR=${pkgdir} install
}
