pkgname=alsa-tools
pkgver=1.2.5
pkgbuild=1
arch="auto"

shortdesc=("Advanced tools for certain sound cards.")

tags=('libs media-libs')

source=("https://www.alsa-project.org/files/pub/tools/${pkgname}-${pkgver}.tar.bz2")

adddep=("gcc-libs glibc")

build_deps=("${adddep} alsa-lib fltk gtk2 gtk3")

#NOTE: qlo10k1 Удалён, потому что он сломан
_tools=('as10k1' 'envy24control' 'hdsploader' 'hdspconf' 'hdspmixer'
'mixartloader' 'pcxhrloader' 'rmedigicontrol' 'sb16_csp' 'seq/sbiload'
'sscape_ctl' 'us428control usx2yloader' 'vxloader' 'echomixer' 'ld10k1'
'hwmixvolume' 'hdajackretask' 'hda-verb' 'hdajacksensetest')

build(){
  go_src_dir
  burn_patches

#NOTE: Не используем корневой makefile, а собираем каждый проект отдельно
  for tool in ${_tools[@]}; do
    (
    cd $tool
    autoreconf -vfi
    ./configure \
      --prefix=/usr \
      --sbindir=/usr/bin \
      --libdir=/usr/lib
    make -j${numjobs}
    make DESTDIR=${pkgdir} install
    )
  done
}
