pkgname=qsynth
pkgver=0.9.10
pkgbuild=1
arch=("auto")

shortdesc=("Qt GUI for FluidSynth.")

source=("https://downloads.sourceforge.net/${pkgname}/${pkgname}-${pkgver}.tar.gz")

tags=("utils media-sound")

adddep=("gcc-libs glibc hicolor-icon-theme qt6-base qt6-svg")

build_deps=("${adddep} cmake fluidsynth qt6-tools")

# NOTE: Это опциональные зависимости
removedep=("qt6-wayland")

build() {
  go_src_dir
  burn_patches
  cmake -B build \
    -D CMAKE_BUILD_TYPE=Release \
    -D CMAKE_INSTALL_PREFIX=/usr \
    -D CMAKE_INSTALL_LIBDIR=lib \
    -D CMAKE_BUILD_TYPE=None \
    -D CONFIG_QT6=ON \
    -W no-dev
  cmake --build build -j${numjobs}
  DESTDIR=${pkgdir} cmake --install build
  install -vDm 644 ./{ChangeLog,README,TRANSLATORS} -t ${pkgdir}/usr/share/doc/${pkgname}
}
