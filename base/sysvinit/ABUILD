pkgname=sysvinit
pkgver=3.00
pkgbuild=1
arch=("auto")

shortdesc=("Classical init system")
longdesc=("The Sysvinit package contains programs for controlling the startup, running, and shutdown of the system.")

tags=("base sys-apps")

source=("http://download.savannah.gnu.org/releases/sysvinit/${pkgname}-${pkgver}.tar.xz")

build_deps="glibc util-linux-ng coreutils gawk"

adddep="coreutils util-linux-ng gawk"

build() {
  go_src_dir
  burn_patches
  make -j${numjobs}
  make install ROOT=${pkgdir}
  mv ${pkgdir}/sbin/init ${pkgdir}/sbin/init.new

# provided by util-linux
  cd "${pkgdir}"
  rm usr/bin/{mesg,utmpdump,wall}
  rm usr/share/man/man1/{mesg,utmpdump,wall}.1
  rm sbin/sulogin
  rm usr/share/man/man8/sulogin.8
}
