# ABUILD generated by mkpkg_generator.sh

pkgname=sharutils
pkgver=4.15.2
pkgbuild=1
arch=("auto")

shortdesc=("sharutils (GNU shell archive packing utilities)")
longdesc=("'shar' makes so-called shell archives out of many files, preparing them for transmission by electronic mail services. 'unshar' helps unpacking shell archives after reception. 'uuencode' prepares a file for transmission over an electronic channel which ignores or otherwise mangles the eight bit (high order bit) of bytes. 'uudecode' does the converse transformation. 'remsync' allows for remote synchronization of directory trees using electronic mail.")
tags=("base app-arch")
source=("ftp://ftp.gnu.org/gnu/${pkgname}/${pkgname}-${pkgver}.tar.xz")
build_deps="glibc"


before_build() {
	go_src_dir
	sed 's/FUNC_FFLUSH_STDIN/-1/g' -i lib/fseeko.c
}

build() {
	go_src_dir
	CFLAGS+=' -fcommon' # https://wiki.gentoo.org/wiki/Gcc_10_porting_notes/fno_common
	./configure \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--libdir=/usr/lib$LIBDIRSUFFIX \
		--sysconfdir=/etc

	make
}

after_build() {
	go_src_dir
	make DESTDIR="${pkgdir}" install
}


#BUILD_SYSTEM="autotools"
#BUILD_KEYS="--prefix=/usr --libdir=/usr/lib$LIBDIRSUFFIX --mandir=/usr/share/man --sysconfdir=/etc"
#INSTALL_KEYS="DESTDIR=$pkgdir"
