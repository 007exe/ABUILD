# ABUILD generated by mkpkg_generator.sh

pkgname=utempter
pkgver=1.2.1
pkgbuild=1
arch=("auto")

shortdesc=("utempter (utmp updating library and utility)")
longdesc=("The utempter package provides a utility and shared library that allows terminal applications such as xterm and screen to update /var/run/utmp and /var/log/wtmp without requiring root privileges.")

tags=("base sys-apps")
source=("ftp://ftp.altlinux.org/pub/people/ldv/utempter/lib$pkgname-$pkgver.tar.gz")
build_deps="glibc"


build() {
  go_src_dir
  RPM_OPT_FLAGS="$CFLAGS" make
  make -j${numjobs}
}

after_build() {
  go_src_dir
  make DESTDIR="$pkgdir" libdir="/usr/lib$LIBDIRSUFFIX" libexecdir="/usr/lib$LIBDIRSUFFIX" mandir="/usr/share/man" install
  chown root:utmp "$pkgdir/usr/lib$LIBDIRSUFFIX/utempter/utempter"
  chmod 2755 "$pkgdir/usr/lib$LIBDIRSUFFIX/utempter/utempter"
}
