# ABUILD generated by mkpkg_generator.sh

pkgname=gpm
pkgver=1.20.7
pkgbuild=1
arch=("auto")

shortdesc=("gpm (general purpose mouse server)")
longdesc=("The general purpose mouse server, or gpm, allows you to use the mouse to cut and paste text from the screen. It also acts as a mouse server for applications running on the Linux console, such as the Midnight Commander file manager. NOTE: This program may cause problems when you start X on systems that do not use a serial mouse. If you get an 'unable to open mouse device' error from X, disable /etc/rc.d/rc.gpm.")

tags=("base sys-libs")

source=("http://www.nico.schottelius.org/software/gpm/archives/${pkgname}-${pkgver}.tar.gz")

build_deps="ncurses autoconf"
config_files="etc/conf.d/gpm"

before_build() {
	go_src_dir
	./autogen.sh
}

BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr --libdir=/usr/lib$LIBDIRSUFFIX --mandir=/usr/man --sysconfdir=/etc"
INSTALL_KEYS="DESTDIR=$pkgdir"


after_build() {
	install -Dm0755 ${filedir}/gpm.initd ${pkgdir}/etc/init.d/gpm
	install -Dm0644 ${filedir}/gpm.confd ${pkgdir}/etc/conf.d/gpm
	( cd ${pkgdir}/usr/lib${LIBDIRSUFFIX} ; ln -s libgpm.so.2.* libgpm.so )
	chmod 755 ${pkgdir}/usr/lib${LIBDIRSUFFIX}/libgpm.so.*
}
