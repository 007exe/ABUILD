pkgname=glibc
pkgver=2.33
pkgbuild=1
arch=("auto")

shortdesc=("glibc (GNU C libraries)")
longdesc=("This package contains the GNU C libraries and header files. The GNU C library was written originally by Roland McGrath, and is currently maintained by Ulrich Drepper. Some parts of the library were contributed or worked on by other people. Your system ha.")

tags=("base sys-base")

source=("http://ftp.gnu.org/gnu/glibc/glibc-${pkgver}.tar.xz")

config_files="etc/nscd.conf"

build_deps="mkpkg"

pkglist="glibc-solibs glibc-l18n"

build() {
  go_src_dir
  burn_patches
  mkdir glibc_build
  cd glibc_build

  ../configure \
    --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX} \
    --with-headers=/usr/include \
    --mandir=/usr/share/man \
    --infodir=/usr/share/info \
    --enable-kernel=3.2 \
    --enable-add-ons \
    --disable-profile \
    --enable-bind-now \
    --without-gd \
    --enable-multi-arch \
    --with-tls \
    --with-__thread \
    --without-cvs

  make -j${numjobs} || make || exit 1
  make install install_root=${pkgdir} || exit 1
  mkdir -p ${startdir}/localepkg
  make localedata/install-locales install_root=${pkgdir} || exit 1

  install -m644 $srcdir/glibc-${pkgver}/nscd/nscd.conf ${pkgdir}/etc/nscd.conf || exit 1
}


glibc-solibs() {
  pkgname=glibc-solibs
  tags=("virtual sys-libs")
  shortdesc=("glibc-solibs (GNU C libraries) - virtual package")
  longdesc=("The glibc-solibs virtual package SHOULD be REMOVED moved to the glibc package !!!!")
}

glibc-solibs_prep() {
	echo Make glibc-solibs package: done
}

glibc-l18n() {
  pkgname=glibc-l18n
  tags=("virtual sys-libs")
  shortdesc=("glibc-l18n (GNU C libraries) - virtual package")
  longdesc=("The glibc-l18n virtual package SHOULD be REMOVED moved to the glibc package !!!!")
}

glibc-l18n_prep() {
	echo Make glibc-l18n package: done
}
