# ABUILD generated by mkpkg_generator.sh

pkgname=zstd
pkgver=1.4.5
pkgbuild=1
arch=("auto")

shortdesc=("Zstandard - Fast real-time compression algorithm")

tags=("base app-arch")

source=("https://github.com/facebook/zstd/releases/download/v${pkgver}/zstd-${pkgver}.tar.gz")

build_deps="mkpkg"

build() {
  go_src_dir
  make
  make -C contrib/pzstd
  make PREFIX=/usr LIB_DIR=/usr/lib${LIBDIRSUFFIX} DESTDIR="$pkgdir/" install
  ln -sf /usr/bin/zstd "$pkgdir/usr/bin/zstdmt"
  install -Dm755 contrib/pzstd/pzstd "$pkgdir/usr/bin/pzstd"
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
