# ABUILD generated by mkpkg_generator.sh

pkgname=reiserfsprogs
pkgver=3.6.27
pkgbuild=1
arch=("auto")

shortdesc=("reiserfsprogs (Reiserfs filesystem utilities)")
longdesc=("These utilities are used for Reiserfs. Reiserfs is a file system based on balanced tree algorithms. Learn more at the home site: http://www.namesys.com Reiserfs is the work of Hans Reiser and many others. See the file /usr/doc/reiserfsprogs-3.6.21/README for full credits.")

tags=("base sys-fs")

source=("https://mirrors.edge.kernel.org/pub/linux/kernel/people/jeffm/reiserfsprogs/v${pkgver}/reiserfsprogs-${pkgver}.tar.xz")
build_deps="make coreutils gcc kernel-headers grep util-linux-ng"

build() {
  go_src_dir
sed -i '/parse_time.h/i #define _GNU_SOURCE' lib/parse_time.c
  autoreconf -fiv
  ./configure --prefix=/usr \
	--sbindir=/usr/bin \
	--libdir=/usr/lib${LIBDIRSUFFIX} \
	--mandir=/usr/share/man \
	--sysconfdir=/etc

  make
  make DESTDIR="$pkgdir" install
}
