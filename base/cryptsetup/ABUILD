# ABUILD generated by mkpkg_generator.sh

pkgname=cryptsetup
pkgver=2.3.4
pkgbuild=2
arch=("auto")

shortdesc=("Utility for setting up encrypted filesystems")

tags=("base sys-fs")

source=("https://mirrors.edge.kernel.org/pub/linux/utils/cryptsetup/v${pkgver%.*}/cryptsetup-${pkgver}.tar.gz")

build_deps="util-linux-ng device-mapper popt libgcrypt json-c"


BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr --libdir=/usr/lib$LIBDIRSUFFIX --mandir=/usr/share/man --sysconfdir=/etc --enable-cryptsetup-reencrypt --sbindir=/usr/bin --enable-static"
INSTALL_KEYS="DESTDIR=$pkgdir"

after_build() {
	mkdir -p ${pkgdir}/lib${LIBDIRSUFFIX}
	mv ${pkgdir}/usr/lib${LIBDIRSUFFIX}/libcryptsetup.so* ${pkgdir}/lib${LIBDIRSUFFIX}/
}
