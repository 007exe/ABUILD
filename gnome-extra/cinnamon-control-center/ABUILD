pkgname=cinnamon-control-center
pkgver=5.0.2
pkgbuild=1
arch=('auto')

shortdesc=("The Control Center for Cinnamon.")
longdesc=("The Control Center for Cinnamon.")

source=("https://github.com/linuxmint/${pkgname}/archive/${pkgver}/${pkgname}-${pkgver}.tar.gz")

tags="gnome gnome-extra"
# nm-connection-editor                         |
build_deps="meson samurai gnome-online-accounts cinnamon-settings-daemon cinnamon-menus colord libgnomekbd libmm-glib"

build() {
  go_src_dir
  burn_patches
  mkdir -p build
  cd build
  meson \
    --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX} ..
  samu
  DESTDIR="${pkgdir}" samu install
# https://github.com/linuxmint/Cinnamon/pull/7382#issuecomment-374894901
# /usr/bin/cinnamon-control-center is not meant for users, it is a development troubleshooting tool.
# Just install the shell libs/headers.
  rm "${pkgdir}"/usr/bin/cinnamon-control-center
  rm "${pkgdir}"/usr/share/cinnamon-control-center/ui/shell.ui
}

