pkgname=lensfun
pkgver=0.3.95
pkgbuild=1
arch=('auto')

shortdesc=("Database of photographic lenses and a library that allows advanced access to the database")
longdesc=("Database of photographic lenses and a library that allows advanced access to the database")

source=("https://sourceforge.net/projects/lensfun/files/${pkgver}/${pkgname}-${pkgver}.tar.gz")

tags="libs media-libs"
build_deps="python libpng doxygen cmake glib2"

build() {
  go_src_dir
  burn_patches
  cmake . \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=lib${LIBDIRSUFFIX} \
    -DCMAKE_CXX_FLAGS="${CXXFLAGS} -fno-delete-null-pointer-checks"
  make all -j${numjobs}
  make DESTDIR=${pkgdir} install
}
