pkgname=tcc
pkgver=0.9.27
pkgbuild=1
arch=("auto")

shortdesc=("Tiny C Compiler.")

source=("http://download.savannah.gnu.org/releases/tinycc/tcc-${pkgver}.tar.bz2")

tags=("dev-lang develop")

build_deps=("glibc")

build(){
  go_src_dir
  burn_patches
  unset CFLAGS
  unset LDFLAGS
  ./configure --prefix=/usr
  make -j${numjobs}
  make DESTDIR=${pkgdir} docdir=${pkgdir}/usr/share/doc/tcc install
  make clean
  make CFLAGS="-fPIC"
  gcc -shared -o libtcc.so *.o
  install -Dm755 libtcc.so -t ${pkgdir}/usr/lib/
}
