pkgname=ocaml-findlib
pkgver=1.9.6
pkgbuild=1
arch=("auto")

shortdesc=("OCaml package manager.")

source=("http://download.camlcity.org/download/findlib-${pkgver}.tar.gz")

tags=("libs dev-ml")

adddep=("ocaml-compiler-libs ocaml")

build_deps=("${adddep}")

build(){
  go_src_dir
  burn_patches
  ./configure \
    -config /etc/findlib.conf \
    -mandir /usr/share/man \
    -sitelib /usr/lib/ocaml
  make all opt
  make prefix=${pkgdir} install
  install -Dm755 src/findlib/ocamlfind_opt ${pkgdir}/usr/bin/ocamlfind_opt
  install -Dm644 LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
