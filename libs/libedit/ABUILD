pkgname=libedit
pkgver=20210522_3.1
pkgbuild=1
arch=("auto")

shortdesc="Provides generic line editing functions similar to those found in GNU Readline"
longdesc="This is an autotool- and libtoolized port of the NetBSD Editline library (libedit). This Berkeley-style licensed command line editor library provides generic line editing, history, and tokenization functions, similar to those found in GNU Readline."

tags=("libs dev-libs")

source=("http://www.thrysoee.dk/editline/libedit-${pkgver/_/-}.tar.gz")

build_deps="ncurses glibc"

build() {
  go_src_dir
  burn_patches
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX}
  make V=1
  make DESTDIR=${pkgdir} install

  rm "${pkgdir}"/usr/share/man/man3/history.3 # conflicts with readline
  install -Dm 644 "${pkgdir}"/usr/share/man/man3/editline.3 "${pkgdir}"/usr/share/man/man3/el.3

  install -Dm 644 ChangeLog -t "${pkgdir}/usr/share/doc/${pkgname}"
  install -Dm 644 COPYING -t "${pkgdir}/usr/share/licenses/${pkgname}"
}
