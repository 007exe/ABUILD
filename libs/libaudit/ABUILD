# ABUILD generated by mkpkg_generator.sh

pkgname=libaudit
pkgver=2.8.5
pkgbuild=3
arch=("auto")

shortdesc=("The audit-libs package contains the dynamic libraries needed for applications to use the audit framework.")
longdesc=("The audit-libs package contains the dynamic libraries needed for applications to use the audit framework.")

tags=("libs sys-libs")


source="http://people.redhat.com/sgrubb/audit/audit-${pkgver}.tar.gz"
build_deps="libcap-ng openldap kernel-headers python krb5 swig"

# FIXME: not sure that all of this stuff should be config()'ed, check it!
config_files="etc/libaudit.conf
etc/audit/auditd.conf
etc/audit/audit-stop.rules
etc/audisp/plugins.d/au-remote.conf
etc/audisp/plugins.d/audispd-zos-remote.conf
etc/audisp/plugins.d/af_unix.conf
etc/audisp/plugins.d/syslog.conf
etc/audisp/audispd.conf
etc/audisp/zos-remote.conf
etc/audisp/audisp-remote.conf"


BUILD_SYSTEM="autotools"
BUILD_KEYS="--libdir=/lib${LIBDIRSUFFIX} \
	--prefix=/usr \
	--bindir=/bin \
	--sbindir=/bin \
	--sysconfdir=/etc \
	--libexecdir=/usr/lib${LIBDIRSUFFIX}/audit \
	--with-python=yes \
	--enable-gssapi-krb5=yes \
	--with-libcap-ng=yes"
INSTALL_KEYS="DESTDIR=$pkgdir"


after_build() {
	install -d ${pkgdir}/var/log/audit
	rm -rf ${pkgdir}/etc/rc.d
	rm -rf ${pkgdir}/etc/sysconfig
}
