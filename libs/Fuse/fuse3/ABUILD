# ABUILD generated by mkpkg_generator.sh

pkgname=fuse3
pkgver=3.9.3
pkgbuild=1
arch=("auto")

shortdesc=("FUSE (Filesystem in Userspace)")
longdesc=("FUSE is a simple interface for userspace programs to export a virtual filesystem to the Linux kernel. FUSE also aims to provide a secure method for non privileged users to create and mount their own filesystem implementations. The FUSE web site can be found here: http://fuse.sourceforge.net")

tags=("libs sys-fs")

source=("https://github.com/libfuse/libfuse/releases/download/fuse-$pkgver/fuse-$pkgver.tar.xz")
build_deps="pkg-config udev"
adddep="fuse-common"


build() {
	go_src_dir
	rm -rf build
	meson --prefix=/usr --sbindir=bin -D examples=false . build
	cd build
	ninja
	DESTDIR=${pkgdir} ninja install
}

after_build() {
	go_src_dir
	rm -r ${pkgdir}/etc/fuse.conf
	rm -r ${pkgdir}/etc/init.d

	# static device nodes are handled by udev
	rm -r ${pkgdir}/dev
}
