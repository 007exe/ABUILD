pkgname=v4l-utils
pkgver=1.20.0
pkgbuild=1
arch="auto"

shortdesc=("Userspace tools and conversion library for Video 4 Linux")
longdesc=("v4l-utils provides a series of utilities for media devices, allowing to handle the proprietary formats available at most webcams (libv4l), and providing tools to test V4L devices.")

source=("https://linuxtv.org/downloads/v4l-utils/${pkgname}-${pkgver}.tar.bz2")

tags="libs media-libs"

build_deps="qt5-base alsa-lib gcc-libs libjpeg-turbo"

adddep="hicolor-icon-theme"
# This is an optional package
removedep="qt5-base"

build() {
  go_src_dir
  burn_patches
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX} \
    --sysconfdir=/etc \
    --disable-static
  make -j${numjobs}
  make -j1 DESTDIR=${pkgdir} install
}
