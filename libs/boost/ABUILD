# ABUILD generated by mkpkg_generator.sh

pkgname=boost
pkgver=1.74.0
_boostver=${pkgver//./_}
pkgbuild=1
arch=('auto')

shortdesc=('Boost C++ Libraries')
longdesc=('Boost provides free peer-reviewed portable C++ source libraries. The emphasis is on libraries that work well with the C++ Standard Library. One goal is to establish "existing practice" and provide reference implementations so that the Boost libraries are suitable for eventual standardization. Homepage: http://www.boost.org/')

tags=('libs dev-libs')

source=("http://downloads.sourceforge.net/sourceforge/${pkgname}/${pkgname}_${_boostver}.tar.bz2")

build_deps="gcc python bzip2 zlib"

build() {
	go_src_dir
	burn_patches

./bootstrap.sh --with-icu --prefix=/usr --libdir=lib$LIBDIRSUFFIX --with-python=/usr/bin/python

./b2 -d+2 -q --without-mpi --prefix=/usr --libdir=lib$LIBDIRSUFFIX --layout=system -sHAVE_ICU=1 -lstdc++ -lm instruction-set=znver1 threading=multi debug-symbols=on pch=off variant=release

./b2 -d+2 -q --without-mpi --prefix=${pkgdir}/usr --libdir=${pkgdir}/lib$LIBDIRSUFFIX debug-symbols=on pch=off python=3.8 install 

./b2 --prefix=${pkgdir}/usr install

#chmod +x %{buildroot}%{_datadir}/boost-build/src/tools/doxproc.py

#mkdir -p %{buildroot}%{_mandir}/man1

#cp -a v2/doc/bjam.1 %{buildroot}%{_mandir}/man1/

#rm -f %{buildroot}%{_datadir}/boost-build/build/project.ann.py

#rm -f %{buildroot}%{_datadir}/boost-build/tools/doxygen/windows-paths-check.hpp

#ln -sf b2 %{buildroot}%{_bindir}/bjam

#rm -rf %{buildroot}/%{_libdir}/cmake/boost_numpy-%{version}

}
