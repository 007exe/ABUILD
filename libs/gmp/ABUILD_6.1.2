#ABUILD created by: khvalera, khvalera at narod.ru 
pkgname=gmp
pkgver=6.1.2
pkgbuild=1
arch=('auto')

shortdesc="gmp (GNU multiple precision arithmetic library)"

source=("ftp://ftp.gnu.org/gnu/gmp/gmp-${pkgver}.tar.bz2")

tags="libs dev-libs"
# Удалил из зависимостей make (Хрен его знает зачем ему включили в зависимости make) и заменил gcc на gcc-libs
build_deps="gcc-libs"

if [ "$ARCH" = "i686" ]; then
  export ABI=32
else
  export ABI=64
fi

BUILD_SYSTEM="autotools"

BUILD_WORD="LDFLAGS=\"$SLKLDFLAGS\" CFLAGS=\"$SLKCFLAGS\" CXXFLAGS=\"$SLKCFLAGS\" ./configure"

BUILD_KEYS="--prefix=/usr \
--libdir=/usr/lib${LIBDIRSUFFIX} \
--disable-static \
--enable-cxx \
--enable-mpbsd \
--enable-assert \
--enable-fat"

INSTALL_KEYS="DESTDIR=${pkgdir}"

after_build() {
  go_src_dir
  # Do check, let it be.
  make check || exit 1
}
