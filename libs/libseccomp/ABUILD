pkgname=libseccomp
pkgver=2.5.1
pkgbuild=1
arch=("auto")

shortdesc=("Enhanced seccomp library")
longdesc=("The libseccomp package provides an easy to use and platform independent interface to the Linux kernel's syscall filtering mechanism.")

tags=("dev-libs libs")

source=("https://github.com/seccomp/${pkgname}/releases/download/v${pkgver}/${pkgname}-${pkgver}.tar.gz")

build_deps="glibc gperf python-cython python-setuptools"

build() {
  go_src_dir
  burn_patches
  autoreconf -fiv
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX} \
    --disable-static
  make -j${numjobs}
  make DESTDIR=${pkgdir} install
  install -Dm 644 CHANGELOG README.md SECURITY.md -t "${pkgdir}/usr/share/doc/${pkgname}"

#  cd src/python
#  env VERSION_RELEASE=${pkgver} python setup.py build
#  env VERSION_RELEASE=${pkgver} python setup.py install --root="${pkgdir}" --prefix=/usr -O1 --skip-build
}
