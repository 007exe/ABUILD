pkgname=pax-utils
pkgver=1.3.5
pkgbuild=1
arch=("auto")

shortdesc=("'ELF utils that can check files for security relevant properties.")

source=("https://distfiles.gentoo.org/distfiles/${pkgname}-${pkgver}.tar.xz")

tags=("app-misc console")

build_deps=("bash docbook-xml docbook-xsl kernel-headers meson xmlto
libcap libseccomp python python-pyelftools")

adddep=("bash python-pyelftools")

build(){
  go_src_dir
  burn_patches
  sed -E 's|(  paths =) \[\]|\1 ["/usr/lib"]|g' -i lddtree.py
  meson build \
    -D prefix=/usr \
    -D libdir=/usr/lib \
    -D use_seccomp=true \
    -D build_manpages=disabled
  meson configure
  meson compile -C build
  meson install -C build --destdir ${pkgdir}
}
