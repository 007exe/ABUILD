pkgname=newt
pkgver=0.52.23
pkgbuild=1
arch=("auto")

shortdesc=("Not Erik's Windowing Toolkit - text mode windowing with slang.")

source=("https://fedorahosted.org/releases/n/e/newt/newt-${pkgver}.tar.gz")

tags=("utils net-libs")

adddep=("gpm popt slang")

build_deps=("${adddep} python tcl")

# NOTE: Это опциональные зависимости
removedep=("python tcl")

build() {
  go_src_dir
  burn_patches
  sed -i -e 's:-lslang:-lslang -lncurses:g' \
      -e 's:instroot:DESTDIR:g' Makefile.in
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib \
    --with-gpm-support \
    --with-python=python3.10
  make -j${numjobs}
  make DESTDIR=${pkgdir} prefix="/usr" RPM_OPT_FLAGS="ERROR" install
}
