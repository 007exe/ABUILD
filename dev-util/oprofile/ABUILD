# ABUILD generated by mkpkg_generator.sh

pkgname=oprofile
pkgver=0.9.7
pkgbuild=1
arch=("auto")

shortdesc=("oprofile (system profiling tool)")
longdesc=("OProfile is a profiling system for Linux. Profiling runs transparently in the background and profile data can be collected at any time. OProfile makes use of the hardware performance counters provided on Intel, AMD, and other processors, and uses a timer-interrupt based mechanism on CPUs without counters. OProfile can profile the whole system in high detail.")

tags=("develop dev-util")

source=("http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz")

BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr \
  --libdir=/usr/lib${LIBDIRSUFFIX} \
  --mandir=/usr/man \
  --with-kernel-support"
INSTALL_KEYS="DESTDIR=$pkgdir"

after_build() {
	# This seems misplaced, and isn't referenced by any binaries or other files.
	# I'm tempted to think it shouldn't have been installed, but will just move it:
	if [ -r $PKG/usr/share/mangled-name ]; then
		mv $PKG/usr/share/mangled-name $PKG/usr/share/oprofile/mangled-name
	fi
}

