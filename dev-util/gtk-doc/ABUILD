pkgname=gtk-doc
pkgver=1.33.2
pkgbuild=3
arch=("noarch")

shortdesc=("Documentation tool for public library API.")

source=("https://download.gnome.org/sources/gtk-doc/${pkgver%.*}/gtk-doc-${pkgver}.tar.xz")

tags=("dev-util develop")

adddep=("docbook-xml docbook-xsl glib2 python-lxml python-pygments")

# dblatex
build_deps=("${adddep} meson yelp-tools")

build() {
  go_src_dir
  burn_patches
  autoreconf -fiv
  ./configure \
    --prefix=/usr
  make -j${numjobs}
  make DESTDIR=${pkgdir} install
  python -m compileall -d /usr/lib ${pkgdir}/usr/lib
  python -O -m compileall -d /usr/lib ${pkgdir}/usr/lib
}
