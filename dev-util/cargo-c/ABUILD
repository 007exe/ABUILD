pkgname=cargo-c
pkgver=0.9.4
pkgbuild=1
arch=('auto')

shortdesc=("A cargo subcommand to build and install C-ABI compatibile dynamic and static libraries")
longdesc=("cargo applet to build and install C-ABI compatibile dynamic and static libraries.")

source=("https://github.com/lu-zero/cargo-c/archive/v${pkgver}/${pkgname}-${pkgver}.tar.gz")

tags="dev-util develop"

build_deps="curl openssl zlib rust"

build() {
  go_src_dir
  burn_patches
  cargo build \
    --release
  cargo install \
    --no-track \
    --root "${pkgdir}/usr" \
    --path .
  install -D -m644 LICENSE -t "${pkgdir}/usr/share/licenses/${pkgname}"
}
