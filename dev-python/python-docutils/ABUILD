pkgname=python-docutils
pkgver=0.19
pkgbuild=2
arch=("auto")

shortdesc=("Set of tools for processing plaintext docs into formats such as HTML, XML, or LaTeX.")

source=("https://downloads.sourceforge.net/docutils/docutils-${pkgver}.tar.gz")

tags=("dev-python libs")

build_deps=("python python-build python-installer python-setuptools python-wheel")

build() {
  go_src_dir
  python -m build --wheel --skip-dependency-check --no-isolation
  python -m installer --destdir=${pkgdir} dist/*.whl

  for f in ${}pkgdir}/usr/bin/*.py; do
      ln -s "$(basename "$f")" "$pkgdir/usr/bin/$(basename "$f" .py)"
  done

  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
  install -d ${pkgdir}/usr/share/licenses/${pkgname}
  ln -s ${site_packages}/docutils-${pkgver}.dist-info/COPYING.txt ${pkgdir}/usr/share/licenses/${pkgname}/COPYING.txt
}
