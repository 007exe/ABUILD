#!/bin/sh

MODULES="autopep8
cython
dbus-python
flake8
glad
gst-python
ipython
libvirt-python
pybind11
pypy
pyqt-builder
python-aiofiles
python-aiohttp
python-aiosignal
python-anytree
python-apipkg
python-appdirs
python-argcomplete
python-argparse
python-astroid
python-asttokens
python-async-timeout
python-atspi
python-attrdict
python-attrs
python-autocommand
python-automat
python-babel
python-backcall
python-bcrypt
python-beaker
python-beautifulsoup4
python-black
python-bowler
python-breathe
python-brotli
python-build
python-cachecontrol
python-cachy
python-cairo
python-calver
python-cerberus
python-certifi
python-cffi
python-chardet
python-charset-normalizer
python-cleo
python-click
python-click-default-group
python-clikit
python-cloudpickle
python-colorama
python-commentjson
python-commonmark
python-configobj
python-constantly
python-contextlib2
python-contourpy
python-cppy
python-crashtest
python-cryptography
python-css-parser
python-cssselect
python-cycler
python-dask
python-dateutil
python-decorator
python-dill
python-distlib
python-distributed
python-distro
python-distutils-extra
python-django
python-django-debug-toolbar
python-dnspython
python-docker
python-dockerpty
python-docutils
python-docutils-stubs
python-dulwich
python-editables
python-entrypoints
python-euclid3
python-exceptiongroup
python-executing
python-fastimport
python-fastjsonschema
python-feedparser
python-filelock
python-fissix
python-flit
python-flit-core
python-flit-scm
python-fonttools
python-frozenlist
python-fsspec
python-future
python-gdal
python-genshi
python-geoip
python-gnupg
python-gobject
python-gpgme
python-graphviz
python-greenlet
python-gssapi
python-hatch-fancy-pypi-readme
python-hatch-vcs
python-hatchling
python-heapdict
python-html2text
python-html5lib
python-hyperlink
python-hypothesis
python-idna
python-ifaddr
python-imagesize
python-importlib-metadata
python-incremental
python-inflect
python-iniconfig
python-installer
python-iso8601
python-isodate
python-isort
python-jaraco.classes
python-jaraco.context
python-jaraco.functools
python-jaraco.text
python-jarowinkler
python-jedi
python-jeepney
python-jinja
python-jsonpointer
python-jsonschema
python-keyring
python-kikit
python-kiwisolver
python-lark-parser
python-lazy-object-proxy
python-libseccomp
python-locket
python-lockfile
python-lxml
python-mako
python-marisa
python-markdown
python-markdown2
python-markdown-it-py
python-markupsafe
python-matplotlib
python-matplotlib-inline
python-mccabe
python-mdit_py_plugins
python-mdurl
python-memcached
python-miniupnpc
python-mistune
python-mock
python-more-itertools
python-moreorless
python-mpd2
python-mpi4py
python-msgpack
python-multidict
python-munkres
python-mygpoclient
python-mypy_extensions
python-myst-parser
python-nbxmpp
python-ndg-httpsclient
python-netifaces
python-nodeenv
python-nose
python-notify2
python-nspektr
python-numpy
python-openbabel
python-opencv
python-opengl
python-ordered-set
python-packaging
python-pam
python-paramiko
python-partd
python-pastel
python-pathspec
python-patiencediff
python-pbr
python-pcbnewtransition
python-pep517
python-pep621
python-pexpect
python-pickleshare
python-pillow
python-pip
python-pkginfo
python-platformdirs
python-pluggy
python-ply
python-poetry
python-poetry-core
python-precis_i18n
python-prettytable
python-progress
python-prompt_toolkit
python-protobuf
python-psutil
python-ptyprocess
python-pure-eval
python-py
python-py3c
python-pyasn1
python-pyasn1-modules
python-pyaudio
python-pybars3
python-pycodestyle
python-pycparser
python-pycups
python-pycurl
python-pydantic
python-pyelftools
python-pyenchant
python-pyflakes
python-pygame
python-pygments
python-pyinotify
python-pylev
python-pylint
python-pymeta3
python-pynacl
python-pyopenssl
python-pyparsing
python-pypng
python-pyproject2setuppy
python-pyproject-hooks
python-pyproject-metadata
python-pyqt5
python-pyqt5-sip
python-pyqt6
python-pyqt6-sip
python-pyrsistent
python-pyserial
python-pysocks
python-pysol_cards
python-pytest
python-pytest-console-scripts
python-pytest-mock
python-pytest-runner
python-pytz
python-pyudev
python-pyxdg
python-qscintilla-qt5
python-qscintilla-qt6
python-qtpy
python-random2
python-rapidfuzz
python-rapidfuzz-capi
python-rdflib
python-recommonmark
python-regex
python-rencode
python-requests
python-requests-toolbelt
python-resolvelib
python-retrying
python-rfc3987
python-rich
python-rjsmin
python-ruamel-yaml
python-ruamel.yaml.clib
python-scikit-build
python-secretstorage
python-semantic-version
python-service-identity
python-setproctitle
python-setuptools
python-setuptools-rust
python-setuptools-scm
python-setuptools-scm-git-archive
python-sgmllib3k
python-sh
python-shapely
python-shellingham
python-six
python-smartypants
python-snowballstemmer
python-solidpython
python-sortedcontainers
python-soupsieve
python-sphinx
python-sphinx-alabaster-theme
python-sphinx-argparse
python-sphinx-argparse-cli
python-sphinx-autodoc-typehints
python-sphinx-basic-ng
python-sphinx-copybutton
python-sphinx-furo
python-sphinx-inline-tabs
python-sphinx-lv2-theme
python-sphinx-reredirects
python-sphinx-theme-builder
python-sphinx_rtd_theme
python-sphinxcontrib-applehelp
python-sphinxcontrib-devhelp
python-sphinxcontrib-htmlhelp
python-sphinxcontrib-jsmath
python-sphinxcontrib-qthelp
python-sphinxcontrib-serializinghtml
python-sphinxcontrib-spelling
python-sphinxcontrib-towncrie
python-sphinxcontrib-towncrier
python-sphinxcontrib-trio
python-sphinxext-opengraph
python-sqlalchemy
python-sqlparse
python-stack-data
python-tabulate
python-tblib
python-termcolor
python-tests
python-tinycss2
python-toml
python-tomli
python-tomli-w
python-tomlkit
python-toolz
python-tornado
python-traitlets
python-trove-classifiers
python-twisted
python-typing_extensions
python-typogrify
python-uc-micro-py
python-unidecode
python-urllib3
python-urwid
python-utils
python-validate-pyproject
python-virtualenv
python-volatile
python-wcag-contrast-ratio
python-wcwidth
python-webcolors
python-webencodings
python-websocket-client
python-websockets
python-wheel
python-wrapt
python-wxpython
python-xapp
python-xdg
python-xlib
python-yaml
python-yarl
python-yaspin
python-zict
python-zipp
python-zope-interface
python-zstandard
sip
towncrier
yapf"

#pip install
#pip uninstall

##mkpkg --help
#-ba   : Авто установка пакетов из списка builddeps
#-ib   : Автоматически увеличить номер билда на единицу.
#-si   : Установить пакет после сборки (необходимо настроить sudo)
#-nc   : Не очищать временные директории после сборки.
#-wd   : Имя директории, где будет проходить сборка пакета.
#-pod  : Имя директории, куда будет помещён готовый пакет.
###

STARTD=`pwd`
LOGFILE=~/pythoh_m_build.log

set -e
ii=0
for i in $MODULES; do
    # Проверить сущетвует ли сценарй ABUILD для сборки пакета
    # если он существует
    if [ -f $i/ABUILD ]
    then
        cd $i
        if mkpkg -ba -wd ~/mkpkg/build -si ; then
           echo "$i ГОТОВ" >> $LOGFILE
           cd $STARTD
        else
           echo "$i НЕ СОБРАН!!!" >> $LOGFILE
           cd $STARTD
        fi
    else
        # Если сценарй ABUILD для сборки пакета не найден
        # Занести имя пакетав массив
        multipkg[ii]=$i
        # и увеличить счётчик на 1
        ((ii=ii+1))
    fi
done

echo "     Следующие пакеты были пропищены поскольку являются мльтипакетами"
echo "=========================================================================="
echo ${multipkg[@]}
set +e
