pkgname=python-setuptools-rust
pkgver=1.5.2
pkgbuild=1
arch=("auto")

shortdesc=("Compile and distribute Python extensions written in rust as easily as if they were written in C.")

source=("https://github.com/PyO3/setuptools-rust/archive/v${pkgver}/${pkgname}-${pkgver}.tar.gz")

tags=("dev-python libs")

build_deps=("python rust python-setuptools python-semantic-version python-typing_extensions")

adddep=("rust python-setuptools python-semantic-version python-typing_extensions")

build() {
  go_src_dir
  export SETUPTOOLS_SCM_PRETEND_VERSION=${pkgver}
  python setup.py build
  python setup.py install --root=${pkgdir} --optimize=1
  install -Dm644 LICENSE -t ${pkgdir}/usr/share/licenses/${pkgname}/
}
