#!/bin/sh

MODULES="
autopep8
python-aiofiles
python-docker
python-dockerpty
python-gnupg
python-distribute
python-mygpoclient
python-django-debug-toolbar
python-eyed3
python-genshi
python-pycups
python-pycurl
"

set -e
ii=0
for i in $MODULES; do
    # Проверить сущетвует ли сценарй ABUILD для сборки пакета
    # если он существует
    if [ -f $i/ABUILD ]
    then
        echo "Очистить директорию с исходниками"
        rm -r ~/mkpkg/source_cache
        echo "Перейти в каталог с ABUILD пакета"
        cd $i
        echo "Собрать и установить пакет"
        mkpkg -si -ba ${BUILD}
        echo "Подняться на уровень выше"
        cd ..
        echo "Пакет $i успешно собран"
        echo "=========================================================================="
    else
        # Если сценарй ABUILD для сборки пакета не найден
        # Занести имя пакетав массив
        multipkg[ii]=$i
        # и увеличить счётчик на 1
        ((ii=ii+1))
    fi
done

echo "     Следующие пакеты были пропищены поскольку являются мльтипакетами"
echo "=========================================================================="
echo ${multipkg[@]}
set +e
