pkgname=python-solidpython
pkgver=1.1.2
pkgbuild=1
arch=("auto")

shortdesc=("Python frontend for solid modelling that compiles to OpenSCAD.")
longdesc=("SolidPython is a generalization of Phillip Tiefenbacher's openscad module, found on Thingiverse. It generates valid OpenSCAD code from Python code with minimal overhead.")

source=("https://github.com/SolidCode/SolidPython/archive/refs/tags/v${pkgver}.tar.gz")

tags=("libs dev-python")

build_deps=("python python-build python-installer python-poetry python-setuptools-scm python-wheel
python-euclid3 python-pypng python-prettytable python-regex")

adddep=("python-euclid3 python-pypng python-prettytable python-regex")

export SETUPTOOLS_SCM_PRETEND_VERSION=${pkgver}

build() {
  go_src_dir
  sed -i -e '/tox/d' -e 's|setuptools>=.*|setuptools\",|' pyproject.toml
  python -m build --wheel --no-isolation
  python -m installer --destdir=${pkgdir} dist/*.whl
}
