pkgname=python-wxpython
pkgver=4.1.1
pkgbuild=1
arch=('auto')

shortdesc=("Cross-platform GUI toolkit")
longdesc=("Cross-platform GUI toolkit")

source=("https://files.pythonhosted.org/packages/source/w/wxPython/wxPython-$pkgver.tar.gz")

tags="libs dev-python"

build_deps=('wxgtk3 python-six mesa glu webkit2gtk python-requests python-setuptools')

adddep="python-six"

build() {
  go_src_dir
#Fix compatibility with wxgtk3
  sed -i "s|WX_CONFIG = 'wx-config'|WX_CONFIG = 'wx-config-gtk3'|" build.py

  python build.py build --release
  python build.py install --destdir="$pkgdir"

  install -Dm 644 LICENSE.txt "$pkgdir"/usr/share/licenses/$pkgname/LICENSE.txt
  find "$pkgdir/usr/lib${LIBDIRSUFFIX}" -type f | xargs chmod 644
}
