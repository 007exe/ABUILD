pkgname=python-gobject
pkgver=3.42.2
pkgbuild=2
arch=("auto")

shortdesc=("Python Bindings for GLib/GObject/GIO/GTK+.")

source=("https://download.gnome.org/sources/pygobject/${pkgver%.*}/pygobject-${pkgver}.tar.xz")

tags=("libs dev-python")

build_deps="python python-cairo gobject-introspection git meson glibc>=2.36 cairo>=1.17.6 libffi>=3.4.4 gobject-introspection>=1.74.0 glib2>=2.74.5 python>=3.11.1"

adddep=("gobject-introspection")

build() {
  go_src_dir
  burn_patches
  meson build --prefix=/usr --buildtype=release
  meson compile -C build
  meson install -C build --destdir ${pkgdir}
  python -m compileall -d /usr/lib ${pkgdir}/usr/lib
  python -O -m compileall -d /usr/lib ${pkgdir}/usr/lib
}
