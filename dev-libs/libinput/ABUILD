pkgname=libinput
pkgver=1.19.1
pkgbuild=1
arch=("auto")

shortdesc=("Input device management and event handling library")
longdesc=("libinput is a library to handle input devices in Wayland compositors and to provide a generic X.Org input driver.")

source=("https://freedesktop.org/software/$pkgname/$pkgname-$pkgver.tar.xz")

tags=("libs dev-libs")

build_deps="meson mtdev libevdev libwacom gtk3"

build() {
  go_src_dir
  burn_patches
  meson build \
    -D prefix=/usr \
    -D libdir=lib${LIBDIRSUFFIX} \
    -D b_lto=false \
    -D udev-dir=/lib/udev \
    -D tests=false \
    -D documentation=false \
    -D debug-gui=false \
    -Ddebug-gui=true
  meson compile -C build

  DESTDIR="$pkgdir" meson install -C build

  install -Dvm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
