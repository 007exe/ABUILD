pkgname=libmirage
pkgver=3.2.6
pkgbuild=1
arch=("auto")

shortdesc=("CD-ROM image (B6T/C2D/CCD/CDI/CIF/CUE/ISO/MDS/MDX/NRG/TOC) access library.")

source=("https://downloads.sourceforge.net/cdemu/${pkgname}-${pkgver}.tar.xz")

tags=("libs dev-libs")

build_deps=("gtk-doc gobject-introspection cmake intltool glib2 libsndfile libsamplerate zlib bzip2 xz shared-mime-info")

adddep=("shared-mime-info")

build() {
  go_src_dir
  burn_patches
  cmake -B build \
    -DCMAKE_BUILD_TYPE=None \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=lib \
    -DPOST_INSTALL_HOOKS:BOOL=OFF
  cmake --build build -j${numjobs}
  DESTDIR=${pkgdir} cmake --install build
}
