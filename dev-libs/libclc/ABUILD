pkgname=libclc
pkgver=14.0.6
pkgbuild=1
arch=("noarch")

shortdesc=("OpenCL C library.")
longdesc=("Library requirements of the OpenCL C programming language.")

source=("https://github.com/llvm/llvm-project/releases/download/llvmorg-${pkgver}/${pkgname}-${pkgver}.src.tar.xz")

tags=("develop dev-libs")

build_deps=("clang llvm cmake ninja python spirv-llvm-translator")

build() {
  mkdir -p ${srcdir}/${pkgname}-${pkgver}.src/build
  cd ${srcdir}/${pkgname}-${pkgver}.src/build
  cmake .. -G Ninja \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DLLVM_CONFIG=/usr/bin/llvm-config
  ninja
  DESTDIR=${pkgdir} ninja install
  install -Dm644 ../LICENSE.TXT ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
