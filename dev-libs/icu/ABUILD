# NOTE: После обновления данного пакета необходимо пересобрать следующие пакеты:
# libxml2 - необходимо собрать вручную и установить после чего следует пересобрать пакет libxml2, поскольку поломка пакета libxml2 приводит
# к не работоспособноости пакетного менеджера mpkg.
#
# boost brltty dovecot fcitx freerdp fwbuilder gspell harfbuzz js js78 kdeplasma-addons konsole libcdr libical libphonenumber libqalculate
# libvisio libxml2 ncmpcpp nodejs openttd perl-xml-libxml php plasma-workspace r raptor strawberry tracker3 vte3 vte4 webkit2gtk webkit2gtk-4.1
# webkit2gtk-5.0 widelands wpewebkit xerces-c qt5-base qt5-webengine qt6-5compat qt6-base qt6-webengine

pkgname=icu
pkgver=73.2
pkgbuild=1
arch=("auto")

shortdesc=("International Components for Unicode.")

source=("https://github.com/unicode-org/icu/releases/download/release-${pkgver//./-}/${pkgname}4c-${pkgver//./_}-src.tgz")

tags=("dev-libs libs")

adddep=("gcc-libs glibc")

build_deps=("${adddep} python clang")

build() {
  go_src_dir
  burn_patches
  cd source
  ./configure \
    --prefix=/usr \
    --sbindir=/usr/bin \
    --sysconfdir=/etc \
    --libdir=/usr/lib \
    --mandir=/usr/share/man \
    --disable-static
  make -j${numjobs}
  make -j1 DESTDIR=${pkgdir} install

  install -Dm644 ../LICENSE ${pkgdir}/usr/share/licenses/icu/LICENSE
}
