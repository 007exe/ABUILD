pkgname=stfl
pkgver=0.24
pkgbuild=1
arch=("auto")

shortdesc=("Library implementing a curses-based widget set for text terminals.")

source=("http://bygone.clairexen.net/stfl/stfl-${pkgver}.tar.gz")

tags=("libs dev-libs")

build_deps=("patch swig ncurses")

build() {
  go_src_dir
  burn_patches
#  sed -i \
#    -e 's/-Os -ggdb//' \
#    -e 's/^\(all:.*\) example/\1/' \
#    -e 's/$(CC) -shared/$(CC) $(LDFLAGS) -shared/' \
#    -e 's/ -o $@ $(LDLIBS) $^/ $^ $(LDLIBS) -o $@/' \
#    -e 's/-lncursesw/-lncursesw -pthread/' \
#    -e 's/\<ar\>/$(AR)/' \
#    -e 's/\<ranlib\>/$(RANLIB)/' \
#    Makefile
  make prefix=/usr Makefile.deps
  make prefix=/usr
  make prefix=/usr DESTDIR=${pkgdir} install
  ln -s /usr/lib/libstfl.so.0.24 ${pkgdir}/usr/lib/libstfl.so.0
}
