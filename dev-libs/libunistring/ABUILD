pkgname=libunistring
pkgver=0.9.10
pkgbuild=2
arch=("auto")

shortdesc="GNU Unicode string library"
longdesc="This library implements Unicode strings (in three flavours: UTF-8 strings, UTF-16 strings, UTF-32 strings), together with functions for Unicode charactets (character names, classifications, properties) and functions for string processing (formatted output, width, word breaks, line breaks, normalization, case folding, regular expressions)."

tags=("develop dev-libs")

source=("https://ftp.gnu.org/gnu/$pkgname/${pkgname}-${pkgver}.tar.xz")

build_deps="glibc"

build() {
  go_src_dir
  burn_patches
# https://git.savannah.gnu.org/cgit/gnulib.git/commit/?id=cca32830b5
  sed -i '/pragma weak pthread_create/d' tests/glthread/thread.h
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib$LIBDIRSUFFIX
  make -j${numjobs}
  make DESTDIR=${pkgdir} install
}
