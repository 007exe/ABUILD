pkgname=libuv
pkgver=1.41.0
pkgbuild=1
arch=("auto")

shortdesc="Platform layer for node.js and neovim"
longdesc="libuv is a new platform layer for Node providing a cross-platform event loop."

tags=("libs net-libs")

source=("https://dist.libuv.org/dist/v$pkgver/libuv-v$pkgver.tar.gz")

build_deps="python-sphinx"

build() {
  go_src_dir
  ./autogen.sh
  ./configure \
    --prefix=/usr \
    --libdir=/usr/lib${LIBDIRSUFFIX}
  make -j${numjobs}
#  make man -C docs
  make DESTDIR="$pkgdir" install
  install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
  install -Dm644 AUTHORS "$pkgdir"/usr/share/doc/$pkgname/AUTHORS
  install -Dm644 README.md "$pkgdir"/usr/share/doc/$pkgname/README.md
  install -Dm644 ChangeLog "$pkgdir"/usr/share/doc/$pkgname/ChangeLog
#  install -Dm644 docs/build/man/libuv.1 "$pkgdir"/usr/share/man/man1/libuv.1
}
