pkgname=libaio
pkgver=0.3.112
pkgbuild=4
arch=("auto")

shortdesc=("The Linux-native asynchronous I/O facility (aio) library.")
longdesc=("The libaio package is an asynchronous I/O facility ("async I/O", or "aio") that has a richer API and capability set than the simple POSIX async I/O facility. This library, libaio, provides the Linux-native API for async I/O. The POSIX async I/O facility requires this library in order to provide kernel-accelerated async I/O capabilities, as do applications which require the Linux-native async I/O API.")

source=("https://releases.pagure.org/libaio/${pkgname}-${pkgver}.tar.gz")

tags=("dev-libs libs")

build_deps=("make gcc")

build() {
  go_src_dir
# Отключаем установку статической библиотеки
  sed -i '/install.*libaio.a/s/^/#/' src/Makefile
  CFLAGS="-mtune=generic -O2 -pipe"
  make -j${numjobs}
  make prefix=${pkgdir}/usr install
}
