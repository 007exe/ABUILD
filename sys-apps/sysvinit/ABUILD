pkgname=sysvinit
pkgver=3.01
pkgbuild=1
arch=("auto")

shortdesc=("Classical init system")
longdesc=("The Sysvinit package contains programs for controlling the startup, running, and shutdown of the system.")

tags=("base sys-apps")

source=("http://download.savannah.gnu.org/releases/sysvinit/${pkgname}-${pkgver}.tar.xz")

build_deps="glibc util-linux-ng coreutils gawk"

adddep="coreutils util-linux-ng gawk"

build() {
  go_src_dir
#  sysvinit-3.01-consolidated-1 LSF Patch removes several programs installed by other packages, clarifying the message and fixing the compiler warning.
  burn_patches
  make -j${numjobs}
  make install ROOT=${pkgdir}
  mv ${pkgdir}/sbin/init ${pkgdir}/sbin/init.new

# All this removes the patch.
# provided by util-linux
# rm "${pkgdir}"/usr/bin/{mesg,utmpdump,wall}
# rm "${pkgdir}"/usr/share/man/man1/{mesg,utmpdump,wall}.1
# rm "${pkgdir}"/sbin/sulogin
# rm "${pkgdir}"/usr/share/man/man8/sulogin.8
}
