pkgname=bubblewrap
pkgver=0.7.0
pkgbuild=1
arch=("auto")

shortdesc=("Unprivileged sandboxing tool.")
longdesc=("Bubblewrap is a setuid implementation of user namespaces, or sandboxing, that provides access to a subset of kernel user namespace features.")

source=("https://github.com/containers/bubblewrap/releases/download/v${pkgver}/bubblewrap-${pkgver}.tar.xz")

tags=("sys-apps utils")

build_deps=("libxslt docbook-xsl git meson bash-completion")

build() {
  go_src_dir
  burn_patches
  meson build \
    -D prefix=/usr \
    -D libdir=/usr/lib \
    -D selinux=disabled
  meson compile -C build
  meson install -C build --destdir ${pkgdir}
  chmod u+s ${pkgdir}/usr/bin/bwrap
}
