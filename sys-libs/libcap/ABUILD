pkgname=libcap
pkgver=2.53
pkgbuild=1
arch=("auto")

shortdesc=("Library for getting and setting POSIX.1e capabilities")
longdesc=("libcap is a library for getting and setting POSIX.1e (formerly POSIX 6) draft 15 capabilities.")

tags=("libs sys-libs compat32")

source=("https://mirrors.edge.kernel.org/pub/linux/libs/security/linux-privs/libcap2/${pkgname}-${pkgver}.tar.gz")

build_deps="glibc linux-pam kernel-headers"

build() {
  go_src_dir
  burn_patches
  make KERNEL_HEADERS='/usr/include' lib=lib${LIBDIRSUFFIX} prefix='/usr'
  make DESTDIR=${pkgdir} RAISE_SETFCAP='no' lib=lib${LIBDIRSUFFIX} prefix='/usr' install
# docs
  install -vDm 644 {CHANGELOG,README} -t "${pkgdir}/usr/share/doc/${pkgname}/"
  install -vDm 644 pam_cap/capability.conf -t "$pkgdir/usr/share/doc/$pkgname/examples/"
}
